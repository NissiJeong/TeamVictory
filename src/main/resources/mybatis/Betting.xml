<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper    
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"    
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace속성:매퍼파일의 완전한경로 .xml는 생략 -->
<!-- ※ibatis와는 다르게 id값에 .(dot)를 사용 못한다. -->

<mapper namespace="mybatis.Betting">
	
	<select id="bettingList" parameterType="java.util.Map" resultType="BettingDTO">
		  select gameschedule.* from gameschedule  join team  on gameschedule.teamname = team.teamname
	</select>
	
	<select id="selectListTeamInfo" parameterType="java.util.Map" resultType="java.util.Map">
	 select g.gamedate , g.time , t.teamname as hometeam , g.awayteam  , g.homescore , g.awayscore ,
  
    CASE 
<![CDATA[   
   WHEN g.homescore > g.awayscore 
   THEN 'win'
   WHEN  g.homescore < g.awayscore  
   THEN 'lose'
   WHEN  g.homescore = g.awayscore 
   THEN 'draw'
     ]]>
   ELSE 'yet'  END RESULT
   <!--  홈팀 정보 가져올떄 -->
  <if test="home != null">
   from team t join gameschedule g on t.teamname = g.teamname and t.teamname = #{hometeam} and not g.homescore is null order by g.gamedate
	</if>
	 <if test="home == null">
	 from team t join gameschedule g on t.teamname = g.teamname and t.teamname = #{awayteam} and not g.homescore is null order by g.gamedate
	</if>
	</select>
	
</mapper>
